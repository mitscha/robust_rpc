\documentclass[sansserif,mathserif]{article}
\usepackage{pgf,tikz}
\usepackage{pgfplots}
\usepackage{amsmath}


\usetikzlibrary{calc,shadows}
\usetikzlibrary{pgfplots.groupplots}
\newcommand{\mat}[1]{\mathbf{#1}}  

\pgfplotsset{width=7cm,compat=1.3}

\newcommand{\labelsize}{\small}

\pagestyle{empty}
\begin{document}

\begin{figure}[h]
\centering
\begin{tikzpicture}[scale = 0.9]
\begin{groupplot}[group style={group size=2 by 1,horizontal sep=0.34\columnwidth,vertical sep=1.3cm,xlabels at=edge bottom, ylabels at=edge left}, 
width=0.5\columnwidth, /tikz/font=\footnotesize, colormap/blackwhite, view={0}{90}, point meta min=0.0, point meta max=0.5, minor tick num=4, xmin=2, xmax=20, ymin=0, ymax=999]
\nextgroupplot[title = NNPC, xlabel={\labelsize $q$}, ylabel={\labelsize $W$},
mesh/ordering=y varies, colorbar]
\addplot3[surf, shader=flat] file {cesnnpc.dat};
\addplot3+[only marks,mark=*,mark options={white},mark size=2.5] coordinates {(3,839,0.01)};
\nextgroupplot[title = {KM, KMit}, xlabel={\labelsize $W$}, ylabel={\labelsize CE}, 
ymin = 0, ymax = 0.6, xmin=0, xmax=999]
\addplot +[mark=none,solid,black] table[x index=0,y index=1]{ceskm.dat};
\addplot +[mark=none,dashed,black] table[x index=0,y index=2]{ceskm.dat};
\end{groupplot}
\end{tikzpicture}
\caption{\label{fig:eegparam} Left: CE of NNPC (color-coded) for EEG recordings as a function of $q$ and $W$. The white dot in the left figure shows the location of minimum CE. Right: CE of KM (solid line) and KMit (dashed line) as a function of $W$.}
\end{figure}

\end{document}
